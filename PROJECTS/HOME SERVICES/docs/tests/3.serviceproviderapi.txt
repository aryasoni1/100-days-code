Hereâ€™s how to **test the ServiceProvider API** using **Thunder Client** in **VS Code**, assuming your endpoints are protected with `authMiddleware` (JWT) and possibly role-based access (`checkRole` or `checkOwnershipOrRole`).

---

## âœ… Precondition

You must have:

* Logged in as a valid user (ServiceProvider or Admin).
* A valid JWT token for the logged-in user.
* Token used in all requests via `Authorization: Bearer <token>` header.

---

## ğŸ”§ Common Setup for All Requests

**Header (always include):**

```
Authorization: Bearer <your_valid_token>
Content-Type: application/json
```

You can save `token` as a variable in Thunder Client environment and use:

```
Authorization: Bearer {{token}}
```

---

## ğŸ§ª TEST CASES FOR SERVICE PROVIDER API

### 1. âœ… Create a Service Provider

**Method:** `POST`
**URL:** `http://localhost:5050/api/providers`
**Body (JSON):**

```json
{
  "category": "Plumber",
  "description": "Expert in home water systems",
  "rating": 4.5,
  "location": "Bhubaneswar",
  "contact": "9876543210",
  "availability": true
}
```

> âœ” Must be logged in as a **ServiceProvider** or **Admin**.

---

### 2. âœ… Get All Service Providers

**Method:** `GET`
**URL:** `http://localhost:5050/api/providers`

> âœ” Accessible to all logged-in users.

---

### 3. âœ… Get Provider by ID

**Method:** `GET`
**URL:** `http://localhost:5050/api/providers/:id`
Replace `:id` with the actual provider ID (from DB or previous response).

---

### 4. âœï¸ Update Provider

**Method:** `PUT`
**URL:** `http://localhost:5050/api/providers/:id`
**Body (JSON):**

```json
{
  "description": "Updated plumbing expert services",
  "availability": false
}
```

> âœ” Only **owner** or **Admin** can update.

---

### 5. âŒ Delete Provider

**Method:** `DELETE`
**URL:** `http://localhost:5050/api/providers/:id`

> âœ” Only **owner** or **Admin** can delete.

---

## â— Expected Error Cases (Negative Tests)

### ğŸ”’ No Token

* Remove `Authorization` header.
* Expected: `400 Bad Request` with `Authorization header missing`.

### âŒ Invalid Token

* Use malformed token.
* Expected: `403 Forbidden` with `unauthorized`.

### ğŸ”’ Unauthorized Role

* Try to `POST /providers` as a user with `role: "Customer"` (if RBAC is enforced).
* Expected: `403 Forbidden` with `Access denied`.

---

Would you like me to generate **Thunder Client Collections** (JSON) or show how to test **checkOwnershipOrRole** middleware next?
